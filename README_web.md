
# TGK XML Signer — Web Edition

Веб‑приложение (Flask) для наложения и проверки цифровой подписи XML.

## Запуск

```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
export FLASK_APP=webapp.app
flask run --host 0.0.0.0 --port 8000
```

> При первом запуске автоматически создаётся база данных `tgk_signer.db` и пользователь `admin/admin`.

Ключи и сертификаты загружаются через интерфейс администратора (`/admin/keys`).



### Изменения v2
* Убрана зависимость от `@app.before_first_request` — инициализация выполняется сразу после создания приложения. Поддержка Flask 2.3 и 3.x.


### Изменения v3
* `current_user` теперь использует `db.session.get(...)` вместо устаревшего `Query.get` (совместимо с SQLAlchemy 2.x / Flask‑SQLAlchemy 3.x).


### Изменения v4
* `create_all()` вызывается всегда — корректное создание таблиц даже при существующем пустом файле БД.


### Изменения v6
* Полностью переписан `app.py`; модель `User` объявлена до маршрутов, исключены все `NameError`.


### Изменения v7
* Добавлен Bootstrap‑интерфейс, адаптивный дизайн.
* Раздельные панели для пользователя и администратора (Сводка, Управление ключами, Управление пользователями).
* Добавлен CRUD для пользователей (создание, сброс пароля).


### Изменения v8
* Добавлена страница регистрации `/register` — создаётся аккаунт с ролью *user*.
* Создаётся дефолтный пользователь `user/user` при первом запуске.
* На странице входа ссылка на регистрацию.


### Изменения v9
* Маршрут `/register` перемещён выше `__main__`, теперь корректно импортируется и ссылка на регистрацию работает.
